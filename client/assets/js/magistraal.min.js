function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var _magistraalStorage={};const magistraalStorage={get:e=>_magistraalStorage[e]||void 0,set:(e,t)=>{_magistraalStorage[e]=t}},magistraalPersistentStorage={get:e=>{let t=localStorage.getItem(`magistraal.${e}`);if(null!=t)return"JSON:"==t.substring(0,5)?JSON.parse(t.substring(5)):t},set:(e,t)=>"object"==typeof t?localStorage.setItem(`magistraal.${e}`,"JSON:"+JSON.stringify(t)):void 0===t?localStorage.removeItem(`magistraal.${e}`):localStorage.setItem(`magistraal.${e}`,t),remove:e=>magistraalPersistentStorage.set(e,void 0),clear:()=>{let e=[];for(let t=0;t<localStorage.length;t++)"magistraal."==localStorage.key(t).substring(0,11)&&e.push(localStorage.key(t));for(let t=0;t<e.length;t++)localStorage.removeItem(e[t]);return!0}},magistraal={api:{call:(e,t={},a=!1,s=function(){},i)=>new Promise((l,n)=>{if(a){let a=magistraalPersistentStorage.get(`api_response.${e}.${JSON.stringify(t)}`);if(void 0!==a){if(null===i)return"function"==typeof s&&s(a,"live"),l(a),!0;s(a,"cache")}}$.ajax({method:"POST",url:`${magistraalStorage.get("api")}${e}/`,data:t,headers:{Accept:"application/json","X-Auth-Token":magistraalPersistentStorage.get("token")},success:function(n,r,o){if(a&&void 0!==(null==n?void 0:n.data)&&magistraalPersistentStorage.set(`api_response.${e}.${JSON.stringify(t)}`,null==n?void 0:n.data),null!=i&&i!=magistraal.page.current())return!1;n.request=o,n.source="live",l(n),"function"==typeof s&&s(null==n?void 0:n.data,"live");let c=o.getResponseHeader("X-Auth-Token");c&&magistraalPersistentStorage.set("token",c)},error:function(t){var a;if("token_invalid"==(null==t?void 0:null===(a=t.responseJSON)||void 0===a?void 0:a.info)){if(magistraalPersistentStorage.remove("token"),"logout"==e)return void magistraal.page.get("login");magistraal.page.load("login")}if(magistraal.console.error(),void 0!==i&&i!=magistraal.page.current())return!1;n(t)}})})},absences:{paintList:(e,t)=>{let a="";$.each(e,function(e,t){if(0==t.absences.length)return!0;let s=magistraal.template.get("absences-group");s.find(".absences-group-title").text(capitalizeFirst(magistraal.locale.formatDate(t.unix,"Fy"))),$.each(t.absences,function(e,t){let a=magistraal.template.get("absence-list-item");a.find(".absence-list-item-title").html(t.appointment.designation+'<span class="bullet"></span>'+magistraal.locale.formatDate(t.appointment.start.unix,"Hi")+" - "+magistraal.locale.formatDate(t.appointment.end.unix,"Hi")),a.find(".absence-list-item-icon").text(t.lesson||t.abbr),a.find(".absence-list-item-content").text(t.designation),a.attr({"data-type":t.type,"data-permitted":t.permitted,"data-search":t.designation}),magistraal.sidebar.addFeed(a,{title:t.appointment.designation,subtitle:t.designation,table:{"absence.date":capitalizeFirst(magistraal.locale.formatDate(t.appointment.start.unix,"ldFY")),"absence.time":magistraal.locale.formatDate(t.appointment.start.unix,"Hi")+" - "+magistraal.locale.formatDate(t.appointment.end.unix,"Hi"),"absence.lesson":t.lesson,"absence.permitted":magistraal.locale.formatBoolean(t.permitted)}}),a.appendTo(s)}),a+=s.prop("outerHTML")}),magistraal.page.setContent(a)}},appointments:{paintList:(e,t)=>{let a="";$.each(e,function(e,t){var s;let i=magistraal.template.get("appointments-group");if(i.find(".appointments-group-title").text(capitalizeFirst(magistraal.locale.formatDate(t.unix,"ldF"))),0==(null==t?void 0:null===(s=t.appointments)||void 0===s?void 0:s.length)){let e=magistraal.template.get("appointment");return e.find(".lesson-number").html('<i class="fal fa-check"></i>'),e.attr({"data-type":"none","data-status":"none","data-search":"","data-finishable":!1}).removeAttr("onclick"),e.find(".lesson-designation").text(magistraal.locale.translate("appointments.none_this_day")),e.find(".bullet").remove(),e.appendTo(i),!0}$.each(t.appointments,function(e,t){let a=magistraal.template.get("appointment"),s=new Date(1e3*t.start.unix),l=new Date(1e3*t.end.unix),n="";a.attr({"data-finished":t.finished,"data-finishable":!0,"data-has-meeting-link":t.has_meeting_link,"data-id":t.id,"data-search":`${t.subjects.join(", ")} ${t.designation} ${t.content_text}`.trim(),"data-status":t.status,"data-info-type":t.info_type,"data-creator":t.creator}),t.start.lesson>0?a.find(".lesson-number").text(t.duration.lessons<=1?t.start.lesson:`${t.start.lesson}-${t.end.lesson}`):a.find(".lesson-number").html("schedule"==t.status?'<i class="fal fa-info"></i>':""),t.has_meeting_link&&a.find(".lesson-join-ms-teams").attr("href",t.meeting_link),a.find(".lesson-time").text(magistraal.locale.formatDate(s,"Hi")+" - "+magistraal.locale.formatDate(l,"Hi")),a.find(".lesson-designation").text(""==t.facility?t.designation:`${t.designation} (${t.facility})`),a.find(".lesson-content").html(t.content_text);let r=magistraal.locale.translate(`appointments.appointment.info_type.${t.info_type}`);a.find(".lesson-type").text(r),$.each((null==t?void 0:t.attachments)||{},function(e,t){n+=`<a class="appointment-attachment" href="${t.location}"><i class="${t.icon} pr-1 py-1"></i>${t.filename}</a>`});let o={title:t.designation,subtitle:`${addLeadingZero(s.getHours())}:${addLeadingZero(s.getMinutes())} - ${addLeadingZero(l.getHours())}:${addLeadingZero(l.getMinutes())}`,table:{"appointment.school_subject":t.subjects.join(", "),"appointment.facility":t.facility}};o.table[`appointment.info_type.${t.info_type}`]=t.content,o.table["appointment.attachments"]=n,o.table["appointment.start"]=capitalizeFirst(magistraal.locale.formatDate(t.start.unix,"ldFYHi")),o.table["appointment.end"]=capitalizeFirst(magistraal.locale.formatDate(t.end.unix,"ldFYHi")),o.table["appointment.teachers"]=t.teachers.join(", "),magistraal.sidebar.addFeed(a,o),a.appendTo(i)}),a+=i.prop("outerHTML")}),magistraal.page.setContent(a)},view:e=>{magistraal.console.loading(),magistraal.api.call("appointments/info",{id:e},!0,magistraal.appointments.viewCallback)},viewCallback:(e,t)=>{let a={table:{"appointment.attachments":'<a href="#">eeeeee</a>'}};magistraal.sidebar.updateFeed(a,"appointment.start"),"live"==t&&magistraal.console.success()},finish:(e,t)=>{if("true"!=$(`.appointment[data-id="${e}"]`).attr("data-finishable"))return!1;$(`.appointment[data-id="${e}"]`).attr("data-finished",t),magistraal.console.loading("console.loading.finish_appointment"),magistraal.api.call("appointments/finish",{id:e,finished:t}).then(()=>{magistraal.console.success("console.success.finish_appointment")}).catch(()=>{$(`.appointment[data-id="${e}"]`).attr("data-finished",!t)})},create:e=>{}},grades:{paintList:(e,t)=>{let a="";$.each(e,function(e,t){let s=magistraal.template.get("grade-list-item"),i=magistraal.locale.formatDate(t.entered_at,"dFYHi");s.attr({"data-counts":t.counts,"data-exemption":t.exemption,"data-passed":t.passed,"data-search":`${t.value_str} ${t.subject.description} ${t.description} ${i}`,"data-value":t.value,"data-weight":t.weight}),s.find(".list-item-icon").text(t.value_str),s.find(".grade-subject").text(t.subject.description),s.find(".grade-description").text(t.description),s.find(".grade-weight").text(`${t.weight}x`),s.find(".grade-entered-at").text(i);let l={title:t.subject.description,subtitle:capitalizeFirst(t.description),table:{"grade.value":t.value_str,"grade.weight":`${t.weight}x`,"grade.entered_at":capitalizeFirst(i),"grade.counts":magistraal.locale.formatBoolean(t.counts),"grade.exemption":magistraal.locale.formatBoolean(t.exemption)}};magistraal.sidebar.addFeed(s,l),a+=s.prop("outerHTML")}),magistraal.page.setContent(a)}},messages:{paintList:(e,t)=>{magistraal.api.call("messages/info",{id:String(e[0].id)},!0,()=>{},null),magistraal.api.call("messages/info",{id:String(e[1].id)},!0,()=>{},null),magistraal.api.call("messages/info",{id:String(e[2].id)},!0,()=>{},null);let a="";$.each(e,function(e,t){let s=magistraal.template.get("message-list-item");t.subject=t.subject||magistraal.locale.translate("messages.subject.no_subject"),s.find(".message-list-item-title").text(t.subject),s.find(".message-list-item-side-title").text("3 maa 2021"),s.find(".message-list-item-content").text(t.sender.name),s.attr({"data-id":t.id,"data-priority":t.priority,"data-read":t.read,"data-search":t.subject+t.sender.name});let i=1==t.read?"envelope-open":"envelope";s.find(".message-list-item-icon").html(`<i class="fal fa-${i}"></i>`),magistraal.sidebar.addFeed(s,{title:t.subject,subtitle:t.sender.name,table:{"message.sender":t.sender.name,"message.sent_at":magistraal.locale.formatDate(t.sent_at,"ldFYHi")}}),a+=s.prop("outerHTML")}),magistraal.page.setContent(a)},view:(e,t=!0)=>{magistraal.console.loading(),magistraal.api.call("messages/info",{id:e},!0,magistraal.messages.viewCallback,null),t||magistraal.api.call("messages/read",{id:e,read:!t}).catch(()=>{})},viewCallback:(e,t)=>{let a={title:e.subject||magistraal.locale.translate("messages.subject.no_subject"),table:{"message.sender":e.sender.name,"message.sent_at":magistraal.locale.formatDate(e.sent_at,"ldFYHi"),"message.to":e.recipients.to.names.join(", "),"message.cc":e.recipients.cc.names.join(", "),"message.bcc":e.recipients.bcc.names.join(", "),"message.content":e.content}};magistraal.sidebar.setFeed(a),"live"==t&&magistraal.console.success()},send:e=>{let t={to:e.find('[name="to"]').value(),cc:e.find('[name="cc"]').value(),bcc:e.find('[name="bcc"]').value(),subject:e.find('[name="subject"]').value(),content:e.find('[name="content"]').value().replace(/\r\n|\r|\n/g,"<br/>")};magistraal.element.get("send-message").attr("disabled","disabled"),magistraal.popup.close("messages-write-message"),magistraal.console.loading("console.loading.send_message"),setTimeout(()=>{magistraal.api.call("messages/send",t,!1).then(e=>{magistraal.console.success("console.success.send_message")}).catch(e=>{console.error(e),magistraal.console.error("console.error.send_message"),magistraal.popup.open("messages-write-message")}).finally(()=>{e.find('[name="to"], [name="cc"], [name="bcc"]').setTags({}),e.find('[name="subject"], [name="content"]').val(""),magistraal.element.get("send-message").removeAttr("disabled"),magistraal.element.get("cancel-message").removeAttr("disabled")})},500)}},settings:{paintList:e=>{let t="";$.each(e.items,function(a,s){if(void 0!==s.items){let i=magistraal.template.get("setting-category");i.find(".setting-category-title").text(magistraal.locale.translate(`settings.category.${e.category}.${a}.title`)),i.find(".setting-category-icon").html(`<i class="${(null==s?void 0:s.icon)||"cog"}"></i>`);let l="";$.each(s.items,function(e,t){void 0===t.items?l+=magistraal.locale.translate(`settings.setting.${a}.${e}.title`)+", ":l+=magistraal.locale.translate(`settings.category.${a}.${e}.title`)+", "}),l=l.slice(0,-2),i.find(".setting-category-content").text(l),i.attr("onclick",`magistraal.page.load('settings/list', {'category': '${a}'});`),t+=i.prop("outerHTML")}}),magistraal.page.setContent(t)}},console:{info:e=>magistraal.console.send(e,"info",2500),error:(e="console.error.generic")=>magistraal.console.send(e,"error",-1),success:(e="console.success.generic")=>magistraal.console.send(e,"success",1500),loading:(e="console.loading.generic")=>magistraal.console.send(e,"loading",-1),send:(e,t="success",a=1500)=>{e=magistraal.locale.translate(e,e);let s=Date.now();console.log(`${t}: ${e}`);let i={info:{icon:"info-circle",color:"var(--secondary)"},loading:{icon:"circle-notch fa-spin",color:"var(--secondary)"},debug:{icon:"info-circle",color:"var(--secondary)"},error:{icon:"exclamation-circle",color:"var(--danger)"},success:{icon:"check-circle",color:"var(--success)"}},l=i[t]||i.info;return $(".console-message").remove(),magistraal.element.get("console").prepend(`\n\t\t\t\t\t\t\t\t<div class="console-message" data-magistraal="console-message-${s}">\n\t\t\t\t\t\t\t\t\t\t<span class="console-message-content">${e}</span>\n\t\t\t\t\t\t\t\t\t\t<span class="console-message-icon pl-1"><i class="fal fa-${l.icon}" style="color: ${l.color};"></i></span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`),a>=0&&setTimeout(()=>{magistraal.element.get(`console-message-${s}`).remove()},a),s}},load:()=>(magistraalStorage.set("api","/magistraal/api/"),new Promise((e,t)=>{magistraal.locale.load("nl_NL").then(()=>{$(document).trigger("magistraal.ready"),magistraal.console.success(),e()}).catch(()=>{})})),locale:{load:e=>new Promise((t,a)=>{magistraal.api.call("locale",{locale:e},!0,magistraal.locale.loadCallback).finally(()=>{t()}).catch(()=>{})}),loadCallback:(e,t)=>{magistraalStorage.set("translations",e),$("[data-translation]").each(function(){"input"===this.tagName.toLowerCase()?$(this).attr("placeholder",magistraal.locale.translate($(this).attr("data-translation"))):$(this).text(magistraal.locale.translate($(this).attr("data-translation")))})},translate:(e,t)=>{t=t||e;let a=magistraalStorage.get("translations");return void 0===a||void 0===a[e]?t:a[e]},formatBoolean:e=>"1"==e||"yes"==e||"true"==e?magistraal.locale.translate("generic.bool.true","true"):"0"==e||"no"==e||"false"==e?magistraal.locale.translate("generic.bool.false","false"):"",formatDate:(e,t)=>{"object"!=typeof e&&(e=new Date(1e3*e));let a="";switch(t){case"Hi":a+=addLeadingZero(e.getHours())+":",a+=addLeadingZero(e.getMinutes());break;case"dF":a+=e.getDate()+" ",a+=magistraal.locale.translate(`generic.month.${e.getMonth()}`);break;case"ldF":a+=magistraal.locale.translate(`generic.day.${e.getDay()}`)+" ",a+=e.getDate()+" ",a+=magistraal.locale.translate(`generic.month.${e.getMonth()}`);break;case"Fy":a+=magistraal.locale.translate(`generic.month.${e.getMonth()}`)+" ",a+=e.getFullYear();break;case"dFY":a+=e.getDate()+" ",a+=magistraal.locale.translate(`generic.month.${e.getMonth()}`)+" ",a+=e.getFullYear();break;case"dmY":a+=addLeadingZero(e.getDate())+"-",a+=addLeadingZero(e.getMonth()+1)+"-",a+=e.getFullYear();break;case"ldFY":a+=magistraal.locale.translate(`generic.day.${e.getDay()}`)+" ",a+=e.getDate()+" ",a+=magistraal.locale.translate(`generic.month.${e.getMonth()}`)+" ",a+=e.getFullYear();break;case"dmYHi":a+=addLeadingZero(e.getDate())+"-",a+=addLeadingZero(e.getMonth()+1)+"-",a+=e.getFullYear()+" ",a+=magistraal.locale.translate("generic.date_time_seperator")+" ",a+=addLeadingZero(e.getHours())+":",a+=addLeadingZero(e.getMinutes());break;case"dFYHi":a+=e.getDate()+" ",a+=magistraal.locale.translate(`generic.month.${e.getMonth()}`)+" ",a+=e.getFullYear()+" ",a+=magistraal.locale.translate("generic.date_time_seperator")+" ",a+=addLeadingZero(e.getHours())+":",a+=addLeadingZero(e.getMinutes());break;case"ldFYHi":default:a+=magistraal.locale.translate(`generic.day.${e.getDay()}`)+" ",a+=e.getDate()+" ",a+=magistraal.locale.translate(`generic.month.${e.getMonth()}`)+" ",a+=e.getFullYear()+" ",a+=magistraal.locale.translate("generic.date_time_seperator")+" ",a+=addLeadingZero(e.getHours())+":",a+=addLeadingZero(e.getMinutes())}return a}},nav:{open:()=>{$("body").attr("data-nav-active",!0),magistraalStorage.set("nav_active",!0)},close:()=>{$("body").attr("data-nav-active",!1),magistraalStorage.set("nav_active",!1)},toggle:()=>{"true"==magistraalStorage.get("nav_active")?magistraal.nav.close():magistraal.nav.open()}},page:{load:(e,t={},a=!0,s=!1)=>{if(e=trim(e.replace(/[^a-zA-Z\/]/g,""),"/"),"login"==e||"main"==e)return window.location.href=`../${e}/`,!0;history.pushState(null,null,window.location.pathname+"#"+e+"/"+random(1e3,9999)),magistraal.sidebar.clearFeed(),magistraal.sidebar.close(),magistraal.element.get("main").scrollTop(0),$(".nav-item").removeClass("active"),magistraal.element.get(`nav-item-${e}`).addClass("active"),magistraal.page.get(e,t,a)},get:(e,t={},a=!0,s=!1)=>{magistraal.element.get("page-search").val(""),e=trim(e,"/");let i={"absences/list":magistraal.absences.paintList,"appointments/list":magistraal.appointments.paintList,"grades/list":magistraal.grades.paintList,"messages/list":magistraal.messages.paintList,logout:magistraal.logout.logout,"settings/list":magistraal.settings.paintList},l=()=>{};void 0===i[e]||s||(l=i[e]);let n=magistraal.template.get(`page-buttons-${e}`),r=magistraal.element.get("page-buttons-container");return n.length>0?r.html(n.html()):r.html(""),$("body").attr("data-page-buttons",r.find(".btn").length),magistraal.element.get("page-title").text(magistraal.locale.translate(`page.${e}.title`)),new Promise((s,i)=>{try{magistraal.page.request(e,t,l,a).then(e=>{s(e)}).catch(()=>{})}catch{magistraal.console.error()}})},request:(e,t={},a=null,s=!0)=>new Promise((i,l)=>{magistraal.console.loading(),magistraal.api.call(e,t,s,a,e).then(e=>{magistraal.console.success(),i(e)}).catch(e=>{l(e)})}),current:()=>trim(window.location.hash.substring(1).replace(/[^a-zA-Z\/]/g,""),"/"),setContent:(e="")=>{$("main").html(e)}},login:{login:e=>{let t=e.attr("action");magistraal.console.loading("console.loading.login"),magistraal.api.call(t,e.serialize()).then(e=>{let t=e.request.getResponseHeader("X-Auth-Token");if(!t)return magistraal.console.error(`console.error.${null==e?void 0:e.info}`),!1;magistraalStorage.set("token",t),magistraal.console.success("console.success.login"),window.location.href="../main/"}).catch(e=>{var t;magistraal.console.error(`console.error.${null==e?void 0:null===(t=e.responseJSON)||void 0===t?void 0:t.info}`)})}},inputs:{tagsInput:class{constructor(e){this.$input=e,this.setup()}setup(){0==this.$input.closest(".input-wrapper").length&&this.$input.wrap('<div class="input-wrapper"></div>'),this.$wrapper=this.$input.closest(".input-wrapper"),this.$wrapper.addClass("input-tags-wrapper"),this.$tags=$('<ul class="input-tags-list"></ul>'),this.$tags.appendTo(this.$wrapper),this.$wrapper.hasClass("input-search-wrapper")&&(this.$inputGhost=$('<input type="text" class="form-control input-search input-ghost">'),this.$inputGhost.appendTo(this.$wrapper),this.$tags.append(this.$input.removeClass("input-search").detach())),this.$input.on("click",e=>{this.eventFocus(e)}),this.$wrapper.on("focusout",e=>{this.eventFocusOut(e)}),this.$input.on("magistraal.change",e=>{this.eventChange(e)}),this.$input.on("keyup",e=>{this.eventKeyup(e)})}eventFocus(e){this.$inputGhost.addClass("focus")}eventFocusOut(e){this.$inputGhost.removeClass("focus")}eventChange(e){var t,a;null!=typeof e.addTag&&this.$input.addTag(null===(t=e.addTag)||void 0===t?void 0:t.value,null===(a=e.addTag)||void 0===a?void 0:a.text)}eventKeyup(e){if(8==e.which){let e=this.$tags.find(".input-tags-tag:last-of-type").attr("value");this.$input.removeTag(e)}}},searchInput:class{constructor(e){_defineProperty(this,"results",{set:e=>{let t="";$.each(e,function(e,a){t+=`<li class="input-search-result input-search-result-rich" value="${a.value}"><i class="input-search-result-icon ${null==a?void 0:a.icon}"></i><span class="input-search-result-title">${a.title}</span><span class="input-search-result-description">${a.description}</span></li>`}),this.$results.html(t)}}),this.$input=e,this.setup()}setup(){0==this.$input.closest(".input-wrapper").length&&this.$input.wrap('<div class="input-wrapper"></div>'),this.$wrapper=this.$input.closest(".input-wrapper"),this.$wrapper.addClass("input-search-wrapper"),this.$results=$('<ul class="input-search-results"></ul>'),this.$results.appendTo(this.$wrapper),this.$input.attr("placeholder",magistraal.locale.translate("generic.action.search")),this.$input.on("click",e=>{this.eventFocus(e)}),this.$input.on("focusout",e=>{this.eventFocusOut(e)}),this.$input.on("input",debounce(e=>{this.eventInputDebounced(e)},250)),this.$input.on("magistraal.change",e=>{this.eventChange(e)}),this.$results.on("click",".input-search-result",e=>{this.eventResultClick(e)})}eventFocus(e){this.$wrapper.addClass("active")}eventFocusOut(e){setTimeout(()=>{this.$wrapper.removeClass("active")},50)}eventInputDebounced(e){if(void 0!==this.$input.attr("data-magistraal-search-api")){let e=this.$input.attr("data-magistraal-search-api"),t=this.$input.val()||this.$input.text();magistraal.api.call(`${e}/search`,{query:t},!1).then(t=>{let a=magistraal.inputs.search.remap_api_response(e,null==t?void 0:t.data);this.results.set(a)}).catch(e=>{console.error(e)})}}eventResultClick(e){var t;let a=$(e.target).closest(".input-search-result"),s=a.attr("value"),i=(null===(t=a.find(".input-search-result-title"))||void 0===t?void 0:t.text())||a.text();if(this.$input.val(""),this.$wrapper.hasClass("input-tags-wrapper")){let e=this.$wrapper.find(".input-tags");e.trigger({type:"magistraal.change",addTag:{value:s,text:i}}),this.$input.focus(),setTimeout(()=>{var e;this.$wrapper.addClass("active"),null===(e=this.$wrapper.find(".input-ghost"))||void 0===e||e.addClass("focus")},50)}}eventChange(e){}},search:{remap_api_response:(e,t)=>{let a=[];switch(e){case"people":$.each(t,function(e,t){a.push({icon:"student"==t.type?"fal fa-book-open":"fal fa-briefcase",title:""==t.infix?`${t.first_name} ${t.last_name}`:`${t.first_name} ${t.infix} ${t.last_name}`,description:t.course||t.abbr||magistraal.locale.translate(`people.type.${t.type}`),value:t.id})})}return a}}},logout:{logout:()=>{console.log("UITLOGGEN!!"),magistraalPersistentStorage.clear(),magistraal.page.load("login",{},!1)}},sidebar:{addFeed:(e,t)=>(e.attr("data-sidebar-feed",encodeURI(JSON.stringify(t))),!0),clearFeed:()=>magistraal.sidebar.selectFeed(null),getFeed:e=>JSON.parse(decodeURI(e.attr("data-sidebar-feed")||"{}")),selectFeed:(e,t=!0)=>{if(null==e)return magistraal.sidebar.setFeed(void 0,!1);$(`[class="${e.attr("class")}"]`).removeAttr("data-selected"),e.attr("data-selected",!0),magistraal.sidebar.setFeed(magistraal.sidebar.getFeed(e),t)},setFeed:(e={title:"",subtitle:"",table:[]},t=!0)=>{let a=magistraal.element.get("sidebar-table");magistraal.element.get("sidebar-title").text(e.title),magistraal.element.get("sidebar-subtitle").text(e.subtitle),a.empty(),$.each(e.table,function(e,t){if(""==e||""==t)return!0;let s=magistraal.template.get("sidebar-table-cell").addClass("sidebar-table-key h5 font-heading");s.attr("data-key",e).text(magistraal.locale.translate(`sidebar.table.info.${e}`)),s.appendTo(a);let i=magistraal.template.get("sidebar-table-cell").addClass("sidebar-table-value");i.html(t),i.appendTo(a)}),t&&setTimeout(()=>{magistraal.sidebar.open()},50)},updateFeed:(e,t)=>{let a=magistraal.sidebar.getSelectedFeed();console.log("FEED:",a)},getSelectedFeed(){let e={title:magistraal.element.get("sidebar-title").text(),subtitle:magistraal.element.get("sidebar-subtitle").text(),table:{}};return $('[data-magistraal="sidebar-table"]').find(".sidebar-table-key").each(function(){let t=$(this).attr("data-key"),a=$(this).next(".sidebar-table-value").first().text();e.table[t]=a}),e},open:()=>{$("body").attr("data-sidebar-active",!0),magistraalStorage.set("sidebar_active",!0)},close:()=>{$("body").attr("data-sidebar-active",!1),magistraalStorage.set("sidebar_active",!1)},toggle:()=>{"true"==magistraalStorage.get("sidebar_active")?magistraal.sidebar.close():magistraal.sidebar.open()}},popup:{get:e=>$(`[data-magistraal-popup="${e}"]`).first(),open:e=>{let t=magistraal.popup.get(e);if(0===t.length)return!1;magistraal.element.get("popup-backdrop").addClass("show"),t.addClass("show")},close:e=>{let t=magistraal.popup.get(e);if(0===t.length)return!1;magistraal.element.get("popup-backdrop").removeClass("show"),t.removeClass("show")}},template:{get:e=>$(`[data-magistraal-template="${e}"]`).first().clone().removeAttr("data-magistraal-template")},element:{get:e=>$(`[data-magistraal="${e}"]`)}};