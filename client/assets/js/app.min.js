function debounce(t,a=500){let e;return(...i)=>{clearTimeout(e),e=setTimeout((()=>{t(...i)}),a)}}function throttle(t,a=1e3){let e,i=!1;const n=()=>{null==e?i=!1:(t(...e),e=null,setTimeout(n,a))};return(...r)=>{i?e=r:(t(...r),i=!0,setTimeout(n,a))}}function unique(t){return[...new Set(t)]}function isSet(t){return!(null==t)}function isOnline(){return window.navigator.onLine}function trim(t,a=" "){let e=0,i=t.length;for(;e<i&&t[e]===a;)++e;for(;i>e&&t[i-1]===a;)--i;return e>0||i<t.length?t.substring(e,i):t}function setCookie(t,a,e=null){null===e&&(e=31536e3);const i=new Date;i.setTime(i.getTime()+e),e="expires="+i.toUTCString(),document.cookie=t+"="+a+";"+e+";path=/magistraal/;"}function getCookie(t){t+="=";let a=decodeURIComponent(document.cookie).split(";");for(let e=0;e<a.length;e++){let i=a[e];for(;" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}function random(t,a){return Math.floor(Math.random()*(a-t+1)+t)}function randomString(t){let a="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=e.length;for(let n=0;n<t;n++)a+=e.charAt(Math.floor(Math.random()*i));return a}function addLeadingZero(t){return(t<10?"0":"")+t}function capitalizeFirst(t){return t.charAt(0).toUpperCase()+t.slice(1)}function isNumeric(t){return"number"==typeof t||"string"==typeof t&&(!isNaN(t)&&!isNaN(parseFloat(t)))}function escapeQuotes(t){return t.replace("'","\\x27").replace('"',"\\x22")}function addToObject(t,a,e,i){let n={},r=0;for(let o in t)t.hasOwnProperty(o)&&(r===i&&a&&e&&(n[a]=e),n[o]=t[o],r++);return!i&&a&&e&&(n[a]=e),n}$.fn.value=function(t){if(void 0===t){if("date"==this.attr("type"))return new Date(this.val()).toISOString();if("time"==this.attr("type")){let[t,a]=this.val().split(":");return{hours:t,minutes:a}}if(void 0!==this.attr("data-rich-editor")){let t="<div>"+this.data("editor").html.get()+"</div>",a=$($.parseHTML(t));return a.find('[data-f-id="pbf"]').remove(),a.html()}if("true"==this.attr("contenteditable"))return this.text();if(this.hasClass("input-tags")){let t=this.closest(".input-tags-wrapper");return Object.keys(t.data("tags")||{})}return this.hasClass("input-search")&&this.attr("data-value")||this.val()}if("date"==this.attr("type")){let a=t?new Date(t):new Date;return this.get(0).value=`${a.getFullYear()}-${addLeadingZero(a.getMonth()+1)}-${addLeadingZero(a.getDate())}`}if("time"==this.attr("type")){let a=new Date(t);return this.val(`${addLeadingZero(a.getHours())}:${addLeadingZero(a.getMinutes())}:${addLeadingZero(a.getSeconds())}`)}return void 0!==this.attr("data-rich-editor")?this.data("editor").html.set(t):"true"==this.attr("contenteditable")?this.text(t):this.hasClass("input-search")?this.attr("data-value",t):this.val(t)},$.fn.formSerialize=function(){const t=this.get(0),a={};return"form"==t.nodeName.toLowerCase()&&(this.find("[name]").each((function(){const t=$(this);"textarea"==t.get(0).nodeName.toLowerCase()?a[t.attr("name")]=t.value().replace(/\r\n|\r|\n/g,"<br/>"):a[t.attr("name")]=t.value()})),a)},$.fn.formHasChanges=function(){return"form"==this.get(0).nodeName.toLowerCase()&&(isSet(this.attr("data-has-changes"))&&"true"==this.attr("data-has-changes"))},$(document).on("input","input, textarea, [contenteditable]",throttle((function(t){let a=$(t.target).closest("form");if(0==a.length)return!1;a.attr("data-has-changes",!0)}),1e3)),$.fn.formReset=function(){if("form"!=this.get(0).nodeName.toLowerCase())return!1;this.find("input, textarea, [contenteditable]").each((function(){const t=$(this);t.hasClass("input-tags")?(t.setTags({}),t.val(""),t.data("searchInput").results.set({})):"time"==t.attr("type")&&t.attr("value")?t.val(t.attr("value")):"date"==t.attr("type")?t.value(null):void 0!==t.attr("data-rich-editor")?t.data("editor").html.set(""):t.val("")})),this.removeAttr("data-has-changes")},$(document).on("click",(function(t){0==$(t.target).closest('[data-magistraal="nav-toggler"]').length&&$("nav").length>0&&!0===magistraalStorage.get("nav_active").value&&(t.preventDefault(),magistraal.nav.close())})),$(document).on("magistraal.ready",(function(){$("body").attr("data-online",isOnline())})),$(window).on("online",(function(){$("body").attr("data-online",!0)})),$(window).on("offline",(function(){$("body").attr("data-online",!1)})),$(document).on("magistraal.change",".setting-list-item input",(function(t){let a=$(this),e=a.value(),i=a.closest(".setting-list-item"),n=i.attr("data-setting"),r="true"==i.attr("data-reload");"appearance.theme"==n&&"auto"==e&&(e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark_auto":"light_auto"),magistraal.settings.set(n,e).then((t=>{r&&window.location.reload()}))})),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(t=>{if(!magistraalPersistentStorage.get("settings")["appearance.theme"].includes("auto"))return!1;let a=t.matches?"dark_auto":"light_auto";magistraal.settings.set("appearance.theme",a)})),$.fn.addTag=function(t,a){let e=this.closest(".input-tags-wrapper"),i=e.find(".input-tags-list");void 0===a&&(a=t);let n=e.data("tags")||{};if(void 0===n[t])return $(`<li class="input-tags-tag" value="${t}">${a}</li>`).insertBefore(i.find(".input-tags")),n[t]=a,e.data("tags",n),this},$.fn.removeTag=function(t){let a=this.closest(".input-tags-wrapper"),e=a.find(".input-tags-list"),i=a.data("tags")||{};if(void 0!==i[t])return e.find(`.input-tags-tag[value="${t}"]`).remove(),delete i[t],a.data("tags",i),this},$.fn.setTags=function(t){let a=this.closest(".input-tags-wrapper");a.find(".input-tags-list").find(".input-tags-tag").remove(),a.data("tags",{}),$.each(t,(function(t,a){this.addTag(t,a)}))},$(document).on("magistraal.ready",(function(){$(".input-search").each((function(){new magistraal.inputs.searchInput($(this))})),$(".input-tags").each((function(){new magistraal.inputs.tagsInput($(this))})),FroalaEditor.ICON_DEFAULT_TEMPLATE="font_awesome",FroalaEditor.ICON_TEMPLATES={font_awesome:'<i class="fal fa-[NAME]" aria-hidden="true"></i>'},FroalaEditor.DefineIcon("textColor",{NAME:"paint-brush"}),FroalaEditor.DefineIcon("fontSize",{NAME:"text-size"}),$(".rich-editor").each((function(){let t=$(this);t.attr("data-rich-editor",randomString(8));let a=new FroalaEditor(`[data-rich-editor="${t.attr("data-rich-editor")}"]`,{quickInsertTags:[""],charCounterCount:!1,theme:"magistraal",attribution:!1,toolbarButtons:{moreMisc:{buttons:["bold","italic","underline","|","alignLeft","alignCenter","alignRight","|","formatOLSimple","formatULSimple"],buttonsVisible:10,align:"left"}},placeholderText:magistraal.locale.translate(t.attr("data-translation")),fontSize:[8,9,10,11,12,14,16,18,20,22,24,28,36]});t.data("editor",a)}))})),$(document).on("input","[data-magistraal-search-target]",(function(){let t=$(this),a=magistraal.element.get(t.attr("data-magistraal-search-target")).find("[data-search]"),e=$(this).val().toLowerCase();if(0==e.length&&(void 0===t.attr("data-magistraal")||"page-search"!=t.attr("data-magistraal")))return a.hide(),!1;a.each((function(){let t=$(this);t.attr("data-search").toLowerCase().includes(e)?t.show():t.hide()}))})),$(document).on("mouseenter","[data-magistraal-tooltip]",(function(){magistraal.element.get("tooltip").show();let t=magistraal.locale.translate(`tooltip.hint.${$(this).attr("data-magistraal-tooltip")}`,$(this).attr("data-magistraal-tooltip"));magistraal.element.get("tooltip").text(t)})).on("mousemove",(function(t){if(void 0===$(t.target).attr("data-magistraal-tooltip")&&0==$(t.target).parents("[data-magistraal-tooltip]").length)return magistraal.element.get("tooltip").hide(),!0;magistraal.element.get("tooltip").show(),magistraal.element.get("tooltip").css({top:t.pageY,left:t.pageX})})),$(document).on("click",'[data-magistraal="popup-backdrop"]',(function(t){$("[data-magistraal-popup].show").length>0&&magistraal.popup.close()})),$(document).on("click","[data-popup-action]",(function(t){t.preventDefault();let a=$(this),e=a.attr("data-popup-action");a.parents("[data-magistraal-popup]").first().attr("data-magistraal-popup");switch(e){case"confirm":magistraal.page.loadPrevious(!1);break;case"cancel":magistraal.page.loadPrevious();break}})),$(document).ready((function(){$('input[type="date"]').each((function(){$(this).value(null)}))})),$(window).on("hashchange",(function(t){const a=window.location.hash.substring(2);a.includes("activity=popup")||magistraal.popup.close(),a.includes("activity=sidebar")||magistraal.sidebar.close(),magistraal.page.load({page:a})})),$(document).on("submit","form",(function(t){t.preventDefault()}));