function debounce(t,e=500){let a;return(...i)=>{clearTimeout(a),a=setTimeout((()=>{t(...i)}),e)}}function throttle(t,e=1e3){let a,i=!1;const n=()=>{null==a?i=!1:(t(...a),a=null,setTimeout(n,e))};return(...o)=>{i?a=o:(t(...o),i=!0,setTimeout(n,e))}}function unique(t){return[...new Set(t)]}function isSet(t){return!(null==t)}function isOnline(){return window.navigator.onLine}$.fn.value=function(t){if(void 0===t){if("date"==this.attr("type"))return new Date(this.val()).toISOString();if("time"==this.attr("type")){let[t,e]=this.val().split(":");return{hours:t,minutes:e}}if(void 0!==this.attr("data-rich-editor")){let t="<div>"+this.data("editor").html.get()+"</div>",e=$($.parseHTML(t));return e.find('[data-f-id="pbf"]').remove(),e.html()}if("true"==this.attr("contenteditable"))return this.text();if(this.hasClass("input-tags")){let t=this.closest(".input-tags-wrapper");return Object.keys(t.data("tags")||{})}return this.hasClass("input-search")&&this.attr("data-value")||this.val()}if("date"==this.attr("type")){let e=t?new Date(t):new Date;return this.get(0).value=`${e.getFullYear()}-${addLeadingZero(e.getMonth()+1)}-${addLeadingZero(e.getDate())}`}if("time"==this.attr("type")){let e=new Date(t);return this.val(`${addLeadingZero(e.getHours())}:${addLeadingZero(e.getMinutes())}:${addLeadingZero(e.getSeconds())}`)}return void 0!==this.attr("data-rich-editor")?this.data("editor").html.set(t):"true"==this.attr("contenteditable")?this.text(t):this.hasClass("input-search")?this.attr("data-value",t):this.val(t)},$.fn.formSerialize=function(){const t=this.get(0),e={};return"form"==t.nodeName.toLowerCase()&&(this.find("[name]").each((function(){const t=$(this);if(0==t.val().trim().length&&!t.hasClass("input-tags"))return!0;"textarea"==t.get(0).nodeName.toLowerCase()?e[t.attr("name")]=t.value().replace(/\r\n|\r|\n/g,"<br>"):e[t.attr("name")]=t.value()})),e)},$.fn.formHasChanges=function(){return"form"==this.get(0).nodeName.toLowerCase()&&(isSet(this.attr("data-has-changes"))&&"true"==this.attr("data-has-changes"))},$(document).on("input","input, textarea, [contenteditable]",throttle((function(t){let e=$(t.target).closest("form");if(0==e.length)return!1;e.attr("data-has-changes",!0)}),1e3)),$.fn.formReset=function(){if("form"!=this.get(0).nodeName.toLowerCase())return!1;this.find("input, textarea, [contenteditable]").each((function(){const t=$(this);t.hasClass("input-tags")?(t.setTags({}),t.val(""),t.data("searchInput").results.set({})):"time"==t.attr("type")&&t.attr("value")?t.val(t.attr("value")):"date"==t.attr("type")?t.value(null):void 0!==t.attr("data-rich-editor")?t.data("editor").html.set(""):t.val("")})),this.removeAttr("data-has-changes")},$(document).on("click",(function(t){0==$(t.target).closest('[data-magistraal="nav-toggler"]').length&&$("nav").length>0&&!0===magistraalStorage.get("nav_active").value&&(t.preventDefault(),magistraal.nav.close())})),$(document).on("magistraal.ready",(function(){$("body").attr("data-online",isOnline())})),$(window).on("online",(function(){$("body").attr("data-online",!0)})),$(window).on("offline",(function(){$("body").attr("data-online",!1)})),$(document).on("magistraal.change",".setting-list-item input",(function(t){let e=$(this),a=e.value(),i=e.closest(".setting-list-item"),n=i.attr("data-setting"),o="true"==i.attr("data-reload");"appearance.theme"==n&&"auto"==a&&(a=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark_auto":"light_auto"),magistraal.settings.set(n,a).then((t=>{o&&window.location.reload()}))})),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(t=>{if(!magistraal.settings.get("appeareance.theme").includes("auto"))return!1;let e=t.matches?"dark_auto":"light_auto";magistraal.settings.set("appearance.theme",e)}));class responsiveCarousel{constructor(t){if("x"==t||"y"==t)return this.direction=t,this.$carousel=$(`<div class="responsive-carousel scrollbar-hidden" data-carousel-direction="${t}"><div class="responsive-carousel-header" style="display: none;"><div class="responsive-carousel-header-items d-flex flex-row"></div></div><div class="responsive-carousel-body scrollbar-hidden"></div></div>`),this.$header=this.$carousel.find(".responsive-carousel-header"),this.$headerItems=this.$header.find(".responsive-carousel-header-items"),this.$body=this.$carousel.find(".responsive-carousel-body"),this.$body.on("scroll",(t=>{this.scrollCallback(t)})),this}addSlide(t,e){let a=t.clone(!0);return a.wrap('<div class="responsive-carousel-slide scrollbar-hidden"></div>'),a.parent().appendTo(this.$body),this}showHeader(){this.$header.css("display","")}hideHeader(){this.$header.hide()}getSlideCount(){return this.$body.find(".responsive-carousel-slide").length}setSlideIndex(t){const e=this.$body.find(`.responsive-carousel-slide:nth-child(${t+1})`);return 0==e.length||("x"==this.direction?this.$body.scrollLeft(e.position().left):this.$body.scrollTop(e.position().top)),this}getSlideIndex(){const t="x"==this.direction?this.$body.scrollLeft():this.$body.scrollTop(),e="x"==this.direction?this.$body.get(0).scrollWidth:this.$body.get(0).scrollHeight,a=this.getSlideCount();return Math.round(t/e*a)}scrollCallback(){const t=magistraal.element.get("responsive-carousel-indicator"),e=this.getSlideIndex();t.find(".responsive-carousel-indicator-item.active").removeClass("active"),t.find(`.responsive-carousel-indicator-item:nth-child(${e+1})`).addClass("active")}jQueryObject(){return this.$carousel}updateIndicator(t=!1){const e=magistraal.element.get("responsive-carousel-indicator"),a=magistraal.template.get("responsive-carousel-indicator-item"),i=this.getSlideCount();e.empty();for(let t=0;t<i;t++)e.append(a.clone(!0).toggleClass("active",0==t));t&&(e.addClass("show"),setTimeout((()=>{e.removeClass("show")}),1e3))}}function usingiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function supportsPWA(){return"serviceWorker"in navigator}let deferredInstallPrompt;$(document).on("touchmove",".responsive-carousel",(function(){magistraal.element.get("responsive-carousel-indicator").addClass("show")})),$(document).on("touchend touchcancel",debounce((function(){magistraal.element.get("responsive-carousel-indicator").removeClass("show")}),1e3)),$(document).on("magistraal.ready",(function(){usingiOS()&&(isSet(getCookie("ignoreDialog_iOSInstallPushcut"))||new magistraal.inputs.dialog({title:magistraal.locale.translate("generic.dialog.ios_notifications_install_pushcut.title"),description:magistraal.locale.translate("generic.dialog.ios_notifications_install_pushcut.content")}).open().then((()=>{window.open("https://apps.apple.com/app/id1450936447","_blank","noopener")})).catch((()=>{setCookie("ignoreDialog_iOSInstallPushcut",!0)})))})),window.addEventListener("beforeinstallprompt",(t=>{t.preventDefault(),deferredPrompt=t,isSet(getCookie("ignoreDialog_installPWA"))||new magistraal.inputs.dialog({title:magistraal.locale.translate("generic.dialog.install_pwa.title"),description:magistraal.locale.translate("generic.dialog.install_pwa.content")}).open().then((()=>{deferredPrompt.prompt()})).catch((()=>{setCookie("ignoreDialog_installPWA",!0)}))})),$(document).on("magistraal.ready",(function(){supportsPWA()})),$.fn.addTag=function(t,e){let a=this.closest(".input-tags-wrapper"),i=a.find(".input-tags-list");void 0===e&&(e=t);let n=a.data("tags")||{};if(void 0===n[t])return $(`<li class="input-tags-tag" value="${t}">${e}</li>`).insertBefore(i.find(".input-tags")),n[t]=e,a.data("tags",n),this},$.fn.removeTag=function(t){let e=this.closest(".input-tags-wrapper"),a=e.find(".input-tags-list"),i=e.data("tags")||{};if(void 0!==i[t])return a.find(`.input-tags-tag[value="${t}"]`).remove(),delete i[t],e.data("tags",i),this},$.fn.setTags=function(t){let e=this.closest(".input-tags-wrapper");e.find(".input-tags-list").find(".input-tags-tag").remove(),e.data("tags",{}),$.each(t,((t,e)=>{this.addTag(t,e)}))},$(document).on("magistraal.ready",(function(){$(".input-search").each((function(){new magistraal.inputs.searchInput($(this))})),$(".input-tags").each((function(){new magistraal.inputs.tagsInput($(this))})),FroalaEditor.ICON_DEFAULT_TEMPLATE="font_awesome",FroalaEditor.ICON_TEMPLATES={font_awesome:'<i class="fal fa-[NAME]" aria-hidden="true"></i>'},FroalaEditor.DefineIcon("textColor",{NAME:"paint-brush"}),FroalaEditor.DefineIcon("fontSize",{NAME:"text-size"}),$(".rich-editor").each((function(){let t=$(this);t.attr("data-rich-editor",randomString(8));let e=new FroalaEditor(`[data-rich-editor="${t.attr("data-rich-editor")}"]`,{quickInsertTags:[""],charCounterCount:!1,theme:"magistraal",attribution:!1,toolbarButtons:{moreMisc:{buttons:["bold","italic","underline","|","alignLeft","alignCenter","alignRight","|","formatOLSimple","formatULSimple"],buttonsVisible:10,align:"left"}},placeholderText:magistraal.locale.translate(t.attr("data-translation")),fontSize:[8,9,10,11,12,14,16,18,20,22,24,28,36]});t.data("editor",e)}))})),$(document).on("input","[data-magistraal-search-target]",(function(){const t=$(this),e=t.attr("data-magistraal-search-target"),a=magistraal.element.get(e),i=a.find("[data-search]"),n=$(this).val().toLowerCase();if(void 0===t.attr("data-magistraal")||"page-search"!=t.attr("data-magistraal"))return i.hide(),!1;i.each((function(){const t=$(this);if(t.attr("data-search").toLowerCase().includes(n)?t.removeAttr("hidden"):t.attr("hidden","hidden"),"main"==e){const e=t.parent(".list-item-group");e.children("[data-search]:not([hidden])").length>0?e.show():e.hide()}})),"main"==e&&(a.find("[data-search][hidden]").length==i.length?magistraal.element.get("page-search-no-matches").addClass("show"):magistraal.element.get("page-search-no-matches").removeClass("show"))})),$(document).on("mouseenter","[data-magistraal-tooltip]",(function(){magistraal.element.get("tooltip").show();let t=magistraal.locale.translate(`tooltip.hint.${$(this).attr("data-magistraal-tooltip")}`,$(this).attr("data-magistraal-tooltip"));magistraal.element.get("tooltip").text(t)})).on("mousemove",(function(t){if(void 0===$(t.target).attr("data-magistraal-tooltip")&&0==$(t.target).parents("[data-magistraal-tooltip]").length)return magistraal.element.get("tooltip").hide(),!0;magistraal.element.get("tooltip").show(),magistraal.element.get("tooltip").css({top:t.pageY,left:t.pageX})})),$(document).on("click",'[data-magistraal="popup-backdrop"]',(function(t){$("[data-magistraal-popup].show").length>0&&magistraal.popup.close()})),$(document).on("click","[data-popup-action]",(function(t){let e=$(this),a=(e.attr("data-popup-action"),e.parents("[data-magistraal-popup]").first().attr("data-magistraal-popup"));disablePopstateEvent(50),magistraal.popup.close(a,!0,!0)})),$(document).ready((function(){$('input[type="date"]').each((function(){$(this).value(null)}))}));let popstateEventDisabled=!1;function disablePopstateEvent(t=50){popstateEventDisabled=!0,setTimeout((()=>{popstateEventDisabled=!1}),t)}function trim(t,e=" "){let a=0,i=t.length;for(;a<i&&t[a]===e;)++a;for(;i>a&&t[i-1]===e;)--i;return a>0||i<t.length?t.substring(a,i):t}function setCookie(t,e,a=null){null===a&&(a=31536e3);const i=new Date;i.setTime(i.getTime()+a),a="expires="+i.toUTCString(),document.cookie=t+"="+e+";"+a+";path=/magistraal/;"}function getCookie(t){t+="=";let e=decodeURIComponent(document.cookie).split(";");for(let a=0;a<e.length;a++){let i=e[a];for(;" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null}function random(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function randomString(t){let e="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=a.length;for(let n=0;n<t;n++)e+=a.charAt(Math.floor(Math.random()*i));return e}function addLeadingZero(t){return(t<10?"0":"")+t}function capitalizeFirst(t){return t.charAt(0).toUpperCase()+t.slice(1)}function isNumeric(t){return"number"==typeof t||"string"==typeof t&&(!isNaN(t)&&!isNaN(parseFloat(t)))}function escapeQuotes(t){return t.replace("'","\\x27").replace('"',"\\x22")}function addToObject(t,e,a,i){let n={},o=0;for(let s in t)t.hasOwnProperty(s)&&(o===i&&e&&a&&(n[e]=a),n[s]=t[s],o++);return!i&&e&&a&&(n[e]=a),n}$(window).on("popstate",(function(t){popstateEventDisabled||(magistraal.page.back(!1),$(".popup.show").length>0?magistraal.popup.close(void 0,!1,!0):magistraal.sidebar.close())})),$(window).on("hashchange",(function(t){magistraal.page.load({page:magistraal.page.current()})})),$(document).on("submit","form",(function(t){t.preventDefault()}));