function debounce(callback,delay=500){let timeout;return(...args)=>{clearTimeout(timeout),timeout=setTimeout(()=>{callback(...args)},delay)}}function unique(array){return[...new Set(array)]}function trim(str,char=" "){let start=0,end=str.length;for(;start<end&&str[start]===char;)++start;for(;end>start&&str[end-1]===char;)--end;return start>0||end<str.length?str.substring(start,end):str}function random(min,max){return Math.floor(Math.random()*(max-min+1)+min)}function randomString(length){let result="",characters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",charactersLength=characters.length;for(let i=0;i<length;i++)result+=characters.charAt(Math.floor(Math.random()*charactersLength));return result}function addLeadingZero(n){return(n<10?"0":"")+n}function capitalizeFirst(str){return str.charAt(0).toUpperCase()+str.slice(1)}function isNumeric(str){return"number"==typeof str||"string"==typeof str&&(!isNaN(str)&&!isNaN(parseFloat(str)))}function escapeQuotes(str){return str.replace("'","\\x27").replace('"',"\\x22")}function addToObject(obj,key,value,index){let temp={},i=0;for(let prop in obj)obj.hasOwnProperty(prop)&&(i===index&&key&&value&&(temp[key]=value),temp[prop]=obj[prop],i++);return!index&&key&&value&&(temp[key]=value),temp}$.fn.value=function(value){if(void 0===value){if("date"==this.attr("type"))return new Date(this.val()).toISOString();if("time"==this.attr("type")){let[hours,minutes]=this.val().split(":");return{hours:hours,minutes:minutes}}if(void 0!==this.attr("data-rich-editor")){let html="<div>"+this.data("editor").html.get()+"</div>",$html=$($.parseHTML(html));return $html.find('[data-f-id="pbf"]').remove(),$html.html()}if("true"==this.attr("contenteditable"))return this.text();if(this.hasClass("input-tags")){let $wrapper=this.closest(".input-tags-wrapper"),tags;return Object.keys($wrapper.data("tags")||{})}return this.val()}if("date"==this.attr("type"))return this.get(0).valueAsDate=new Date(value);if("time"==this.attr("type")){let date=new Date(value);return this.val(`${addLeadingZero(date.getHours())}:${addLeadingZero(date.getMinutes())}:${addLeadingZero(date.getSeconds())}`)}return void 0!==this.attr("data-rich-editor")?this.data("editor").html.set(value):"true"==this.attr("contenteditable")?this.text(value):this.val(value)},$.fn.formSerialize=function(){let $form=this,form=this.get(0),output={};return"form"==form.nodeName.toLowerCase()&&(this.find("[name]").each((function(){let $input=$(this);"textarea"==$input.get(0).nodeName.toLowerCase()?output[$input.attr("name")]=$input.value().replace(/\r\n|\r|\n/g,"<br/>"):output[$input.attr("name")]=$input.value()})),output)},$.fn.formReset=function(){let $form=this,form;if("form"!=this.get(0).nodeName.toLowerCase())return!1;this.find("[name]").each((function(){let $el=$(this);$el.hasClass("input-tags")?$el.setTags({}):"time"==$el.attr("type")&&$el.attr("value")?$el.val($el.attr("value")):"date"==$el.attr("type")?$el.get(0).valueAsDate=new Date:void 0!==$el.attr("data-rich-editor")?$el.data("editor").html.set(""):$el.val("")}))},$(document).on("click",(function(e){0==$(e.target).closest('[data-magistraal="nav-toggler"]').length&&magistraalStorage.get("nav_active")&&(e.preventDefault(),magistraal.nav.close())})),$.fn.addTag=function(value,text){let $wrapper=this.closest(".input-tags-wrapper"),$tags=$wrapper.find(".input-tags-list");void 0===text&&(text=value);let tags=$wrapper.data("tags")||{};if(void 0===tags[value])return $(`<li class="input-tags-tag" value="${value}">${text}</li>`).insertBefore($tags.find(".input-tags")),tags[value]=text,$wrapper.data("tags",tags),this},$.fn.removeTag=function(value){let $wrapper=this.closest(".input-tags-wrapper"),$tags=$wrapper.find(".input-tags-list"),tags=$wrapper.data("tags")||{};if(void 0!==tags[value])return $tags.find(`.input-tags-tag[value="${value}"]`).remove(),delete tags[value],$wrapper.data("tags",tags),this},$.fn.setTags=function(tags){let $wrapper=this.closest(".input-tags-wrapper"),$tags;$wrapper.find(".input-tags-list").find(".input-tags-tag").remove(),$wrapper.data("tags",{}),$.each(tags,(function(value,text){this.addTag(value,text)}))},$(document).on("magistraal.ready",(function(){$(".input-search").each((function(){new magistraal.inputs.searchInput($(this))})),$(".input-tags").each((function(){new magistraal.inputs.tagsInput($(this))})),FroalaEditor.ICON_DEFAULT_TEMPLATE="font_awesome",FroalaEditor.ICON_TEMPLATES={font_awesome:'<i class="fal fa-[NAME]" aria-hidden="true"></i>'},FroalaEditor.DefineIcon("textColor",{NAME:"paint-brush"}),FroalaEditor.DefineIcon("fontSize",{NAME:"text-size"}),$(".rich-editor").each((function(){let $el=$(this);$el.attr("data-rich-editor",randomString(8));let editor=new FroalaEditor(`[data-rich-editor="${$el.attr("data-rich-editor")}"]`,{quickInsertTags:[""],charCounterCount:!1,theme:"magistraal",attribution:!1,toolbarButtons:{moreMisc:{buttons:["bold","italic","underline","|","alignLeft","alignCenter","alignRight","|","formatOLSimple","formatULSimple"],buttonsVisible:10,align:"left"}},placeholderText:magistraal.locale.translate($el.attr("data-translation")),fontSize:[8,9,10,11,12,14,16,18,20,22,24,28,36]});$el.data("editor",editor)}))})),$(document).on("input","[data-magistraal-search-target]",(function(){let $input=$(this),$target,$searchResults=magistraal.element.get($input.attr("data-magistraal-search-target")).find("[data-search]"),query=$(this).val().toLowerCase();if(0==query.length&&(void 0===$input.attr("data-magistraal")||"page-search"!=$input.attr("data-magistraal")))return $searchResults.hide(),!1;$searchResults.each((function(){let $searchResult=$(this);$searchResult.attr("data-search").toLowerCase().includes(query)?$searchResult.show():$searchResult.hide()}))})),$(document).on("mouseenter","[data-magistraal-tooltip]",(function(){magistraal.element.get("tooltip").show();let translation=magistraal.locale.translate(`tooltip.hint.${$(this).attr("data-magistraal-tooltip")}`,$(this).attr("data-magistraal-tooltip"));magistraal.element.get("tooltip").text(translation)})).on("mousemove",(function(e){if(void 0===$(e.target).attr("data-magistraal-tooltip")&&0==$(e.target).parents("[data-magistraal-tooltip]").length)return magistraal.element.get("tooltip").hide(),!0;magistraal.element.get("tooltip").show(),magistraal.element.get("tooltip").css({top:e.pageY,left:e.pageX})})),$(document).on("click",'[data-magistraal="popup-backdrop"]',(function(e){if($("[data-magistraal-popup].show").length>0)return magistraal.popup.close($("[data-magistraal-popup].show").last().attr("data-magistraal-popup")),!1})),$(document).on("click","[data-popup-action]",(function(e){e.preventDefault();let $button=$(this),action=$button.attr("data-popup-action"),popup=$button.parents("[data-magistraal-popup]").first().attr("data-magistraal-popup");switch(action){case"confirm":case"cancel":magistraal.popup.close(popup)}})),$('input[type="date"]').each((function(){this.valueAsDate=new Date})),$(window).on("hashchange",(function(){magistraal.page.load(window.location.hash.substring(1))}));