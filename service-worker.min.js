importScripts("https://cdnjs.cloudflare.com/ajax/libs/localforage/1.10.0/localforage.min.js"),importScripts("https://www.gstatic.com/firebasejs/9.8.1/firebase-app-compat.js"),importScripts("https://www.gstatic.com/firebasejs/9.8.1/firebase-messaging-compat.js"),firebase.initializeApp({apiKey:"AIzaSyCeEjw-h8t6-7EAVtcxe2mK0gV52JVe938",authDomain:"magistraal-ed92d.firebaseapp.com",projectId:"magistraal-ed92d",storageBucket:"magistraal-ed92d.appspot.com",messagingSenderId:"276429310436",appId:"1:276429310436:web:0e7fc77f5ded2c9a3d9ff1"});const messaging=firebase.messaging();async function networkFirst(e,a){e.url=removeHash(e.url);try{const a=await fetch(e);return saveResponseInCache(e,a.clone()),a}catch(e){}try{return await caches.match(e)}catch(e){}try{return await caches.match(a)}catch(e){}return new Response("Network error happened",{status:408,headers:{"Content-Type":"text/plain"}})}function removeHash(e){let a=new URL(e);return a.hash="",a.href}async function saveResponseInCache(e,a){"POST"!=e.method&&caches.open(cacheName).then((function(t){return t.put(e,a)}))}messaging.onBackgroundMessage((e=>{if(void 0===e.data||null===e.data)return;const a="object"==typeof e.data?e.data:JSON.parse(e.data["gcm.notification.data"]||"{}")||{};return self.registration.showNotification(a.title||void 0,{body:a.body||void 0,icon:"/magistraal/client/assets/images/app/logo-transparent/512x512.png",badge:"/magistraal/client/assets/images/app/badge/128x128.png",timestamp:Math.floor(1e3*a.timestamp||Date.now())})})),self.addEventListener("fetch",(function(e){"only-if-cached"===e.request.cache&&"same-origin"!==e.request.mode||e.respondWith(networkFirst(e.request,"/magistraal/client/offline/"))})),self.addEventListener("install",(function(e){e.waitUntil(caches.open(cacheName).then((function(e){return e.add(new Request("/magistraal/client/",{cache:"reload"})),e.add(new Request("/magistraal/client/main/",{cache:"reload"})),e.add(new Request("/magistraal/client/login/",{cache:"reload"})),e.add(new Request("/magistraal/client/offline/",{cache:"reload"})),e.addAll(resources)})))})),self.addEventListener("activate",(function(e){e.waitUntil(caches.keys().then((function(e){return Promise.all(e.map((function(a,t){if(a!==cacheName)return caches.delete(e[t])})))})))}));